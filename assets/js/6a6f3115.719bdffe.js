"use strict";(self.webpackChunkdatacomb=self.webpackChunkdatacomb||[]).push([[9374],{3905:(e,a,o)=>{o.d(a,{Zo:()=>p,kt:()=>k});var t=o(7294);function n(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function r(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,t)}return o}function i(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?r(Object(o),!0).forEach((function(a){n(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function l(e,a){if(null==e)return{};var o,t,n=function(e,a){if(null==e)return{};var o,t,n={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||(n[o]=e[o]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=t.createContext({}),m=function(e){var a=t.useContext(s),o=a;return e&&(o="function"==typeof e?e(a):i(i({},a),e)),o},p=function(e){var a=m(e.components);return t.createElement(s.Provider,{value:a},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},c=t.forwardRef((function(e,a){var o=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=m(o),c=n,k=d["".concat(s,".").concat(c)]||d[c]||u[c]||r;return o?t.createElement(k,i(i({ref:a},p),{},{components:o})):t.createElement(k,i({ref:a},p))}));function k(e,a){var o=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=o.length,i=new Array(r);i[0]=c;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[d]="string"==typeof e?e:n,i[1]=l;for(var m=2;m<r;m++)i[m]=o[m];return t.createElement.apply(null,i)}return t.createElement.apply(null,o)}c.displayName="MDXCreateElement"},5445:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>m});var t=o(7462),n=(o(7294),o(3905));const r={sidebar_position:8,slug:"/docs/programacao/python-files",title:"Python - Manipula\xe7\xe3o de Arquivos",description:"Manipula\xe7\xe3o de Arquivos em Python."},i="Python - Manipula\xe7\xe3o de Arquivos",l={unversionedId:"prog1/python-files",id:"prog1/python-files",title:"Python - Manipula\xe7\xe3o de Arquivos",description:"Manipula\xe7\xe3o de Arquivos em Python.",source:"@site/docs/prog1/python-files.md",sourceDirName:"prog1",slug:"/docs/programacao/python-files",permalink:"/docs/programacao/python-files",draft:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8,slug:"/docs/programacao/python-files",title:"Python - Manipula\xe7\xe3o de Arquivos",description:"Manipula\xe7\xe3o de Arquivos em Python."},sidebar:"tutorialSidebar",previous:{title:"Python - M\xf3dulos",permalink:"/docs/programacao/python-modules"},next:{title:"Python - OOP",permalink:"/docs/programacao/python-object-oriented-programming"}},s={},m=[{value:"Arquivo como Objeto",id:"arquivo-como-objeto",level:2},{value:"Lendo Arquivos",id:"lendo-arquivos",level:2},{value:"<code>readlines()</code>, <code>readline()</code>",id:"readlines-readline",level:3},{value:"<code>read()</code>",id:"read",level:3},{value:"Escrevendo em Arquivos",id:"escrevendo-em-arquivos",level:2},{value:"<code>write()</code>",id:"write",level:3},{value:"Arquivos CSV",id:"arquivos-csv",level:2},{value:"<code>DictReader</code>",id:"dictreader",level:3}],p={toc:m},d="wrapper";function u(e){let{components:a,...r}=e;return(0,n.kt)(d,(0,t.Z)({},p,r,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"python---manipula\xe7\xe3o-de-arquivos"},"Python - Manipula\xe7\xe3o de Arquivos"),(0,n.kt)("p",null,"Sabemos como importar outro arquivo Python, ou ",(0,n.kt)("strong",{parentName:"p"},"m\xf3dulo"),", mas como manipulamos arquivos de outras extens\xf5es? "),(0,n.kt)("p",null,"Manipular arquivos se refere \xe0 capacidade de uma linguagem de ler, escrever, criar e editar arquivos j\xe1 existentes, de diferentes\ntipos, e interagir com o disco r\xedgido da m\xe1quina onde o programa est\xe1 sendo executado. Isso abre novas portas e capacidades para nossos programas,\nvisto que anterior \xe0 isso, s\xf3 sab\xedamos ler e imprimir na entrada padr\xe3o (",(0,n.kt)("em",{parentName:"p"},"Standard I/O"),")."),(0,n.kt)("admonition",{title:"M\xf3dulos",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Nesse artigo, vamos trabalhar com 2 m\xf3dulos: "),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/csv.html"},"M\xf3dulo CSV")," ",(0,n.kt)("inlineCode",{parentName:"li"},"csv")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/json.html"},"M\xf3dulo JSON")," ",(0,n.kt)("inlineCode",{parentName:"li"},"json"))),(0,n.kt)("p",{parentName:"admonition"},"Para mais informa\xe7\xf5es, acesse a documenta\xe7\xe3o oficial linkada acima.")),(0,n.kt)("h2",{id:"arquivo-como-objeto"},"Arquivo como Objeto"),(0,n.kt)("p",null,"Em Python, arquivos s\xe3o tratados como objetos, com seus m\xe9todos exclusivos. Portanto, referenciando um arquivo, fa\xe7a como v\xeam fazendo com os dados\nem Python. Por conta disso, se voc\xea tentar imprimir um arquivo fazendo ",(0,n.kt)("inlineCode",{parentName:"p"},'print("file.txt")'),", ver\xe1 algo como:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"<_io.TextIOWrapper name='file.txt' mode='r' encoding='UTF-8'>\n")),(0,n.kt)("p",null,"De qualquer forma, n\xe3o se preocupe com objetos agora. Isso se encaixa no artigo de OOP (",(0,n.kt)("em",{parentName:"p"},"object-oriented programming"),")."),(0,n.kt)("h2",{id:"lendo-arquivos"},"Lendo Arquivos"),(0,n.kt)("admonition",{title:"Arquivo de Exemplo",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Nesse artigo, trabalharemos com alguns arquivos. "),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},'.txt : "text_file.txt"'),(0,n.kt)("li",{parentName:"ul"},'.csv : "csv_file.csv"'),(0,n.kt)("li",{parentName:"ul"},'.json : "json_file.json" '))),(0,n.kt)("p",null,"Para abrir um arquivo, usamos a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"open()"),". Combinada com a declara\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"with"),", o computador e Python ser\xe3o encarregados de fechar o arquivo por voc\xea.\nIsso \xe9 melhor e mais bem visto por que n\xe3o \xe9 raro esquecer de fechar um arquivo que foi aberto numa parte do programa."),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"open()")," toma 2 argumentos, e retorna um objeto (arquivo):"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"1\xb0 (obrigat\xf3rio): o caminho e o nome do arquivo"),(0,n.kt)("li",{parentName:"ul"},"2\xb0 (obrigat\xf3rio): o modo de intera\xe7\xe3o (leitura, escrita, etc.)")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"Par\xe2metros de ",(0,n.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"open()")),(0,n.kt)("p",{parentName:"admonition"},"Veja quais s\xe3o os modos que a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"open()")," aceita:"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'"r"'),": Leitura (",(0,n.kt)("em",{parentName:"li"},"read"),") - modo ",(0,n.kt)("em",{parentName:"li"},"default"),", somente leitura, erro se o arquivo n\xe3o existir;"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'"a"'),": Acrescenta\xe7\xe3o (",(0,n.kt)("em",{parentName:"li"},"append"),") - acrescenta no final do arquivo, n\xe3o exclui o conte\xfado j\xe1 existente no arquivo, cria o arquivo se este n\xe3o existir;"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'"w"'),": Escrita (",(0,n.kt)("em",{parentName:"li"},"write"),") - abre um arquivo para escrita, cria se n\xe3o existir, sobrescreve se o arquivo tiver conte\xfado;"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'"x"'),": Cria\xe7\xe3o (",(0,n.kt)("em",{parentName:"li"},"create"),") - cria um arquivo, erro se ele j\xe1 existir;")),(0,n.kt)("p",{parentName:"admonition"},"Adicionalmente, podemos especificar na mesma ",(0,n.kt)("em",{parentName:"p"},"string")," de 2\xb0 par\xe2metro como o conte\xfado deve ser interpretado:"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'"t"'),": Texto (",(0,n.kt)("em",{parentName:"li"},"text"),") - valor ",(0,n.kt)("em",{parentName:"li"},"default"),", l\xea como texto;"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'"b"'),": Bin\xe1rio (",(0,n.kt)("em",{parentName:"li"},"binary"),") - interpreta como bin\xe1rio (para imagens, etc);"))),(0,n.kt)("p",null,"Veja a sintaxe apropriada:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'#-Aqui, usamos a palavra-chave \'as\' para renomear o arquivo\nwith open("text_file.txt", "r") as text_file:\n    pass\n')),(0,n.kt)("h3",{id:"readlines-readline"},(0,n.kt)("inlineCode",{parentName:"h3"},"readlines()"),", ",(0,n.kt)("inlineCode",{parentName:"h3"},"readline()")),(0,n.kt)("p",null,"Esses m\xe9todos servem para ler o arquivo. S\xe3o bem semelhantes, mas com uma diferen\xe7a essencial: ",(0,n.kt)("inlineCode",{parentName:"p"},"readlines()")," retorna uma lista de ",(0,n.kt)("em",{parentName:"p"},"strings"),", com o conte\xfado\nde todas as linhas do arquivo (cada item da lista \xe9 uma linha). J\xe1 ",(0,n.kt)("inlineCode",{parentName:"p"},"readline()")," retorna somente a ",(0,n.kt)("em",{parentName:"p"},"string")," de uma \xfanica linha."),(0,n.kt)("p",null,"Veja:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"readline()"))),(0,n.kt)("p",null,"Toma 1 argumento:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"1\xb0 (opcional): n\xb0 de bytes m\xe1ximos a serem lidos na linha; ")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'with open("text_file.txt", "rt") as text_file:\n    print(text_file.readline())\n\n#->> Hello! Nice to see you again.\n')),(0,n.kt)("p",null,"E, "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"readlines()"))),(0,n.kt)("p",null,"Toma 1 argumento:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"1\xb0 (opcional): n\xb0 m\xe1ximo de bytes no total;")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"with open(\"text_file.txt\", \"rt\") as text_file:\n    print(text_file.readlines())\n\n#->> ['Hello! Nice to see you again.\\n', 'By the way,\\n', 'Kind of lonely in here.\\n']\n")),(0,n.kt)("h3",{id:"read"},(0,n.kt)("inlineCode",{parentName:"h3"},"read()")),(0,n.kt)("p",null,"O m\xe9todo ",(0,n.kt)("inlineCode",{parentName:"p"},"read()")," l\xea o arquivo todo e retorna uma \xfanica ",(0,n.kt)("em",{parentName:"p"},"string"),", contendo todo o conte\xfado do arquivo. Toma 1 argumento:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"1\xb0 (opcional): n\xb0 de bytes m\xe1ximos a serem lidos")),(0,n.kt)("p",null,"Veja:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'with open("text_file.txt", "rt") as text_file:\n    print(text_file.read())\n\n#->> Hello! Nice to see you again.\n#->> By the way,\n#->> Kind of lonely in here.\n')),(0,n.kt)("h2",{id:"escrevendo-em-arquivos"},"Escrevendo em Arquivos"),(0,n.kt)("p",null,"Para escrever num arquivo, temos que usar o modo ",(0,n.kt)("inlineCode",{parentName:"p"},'"w"'),", ou o modo ",(0,n.kt)("inlineCode",{parentName:"p"},'"a"'),". Veja:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'with open("text_file.txt", "w") as text_file:\n    #-Code\n')),(0,n.kt)("p",null,"Ou,"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'with open("text_file.txt", "a") as text_file:\n    #-Code\n')),(0,n.kt)("h3",{id:"write"},(0,n.kt)("inlineCode",{parentName:"h3"},"write()")),(0,n.kt)("p",null,"Podemos usar o m\xe9todo ",(0,n.kt)("inlineCode",{parentName:"p"},"write()")," para escrever num arquivo. Toma como argumento o que voc\xea quer escrever. Veja:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'with open("text_file.txt", "a") as text_file:\n    text_file.write("But yeah, glad you came back.")\n')),(0,n.kt)("h2",{id:"arquivos-csv"},"Arquivos CSV"),(0,n.kt)("p",null,"Vamos trabalhar bastante com arquivos ",(0,n.kt)("inlineCode",{parentName:"p"},".csv"),". CSV significa ",(0,n.kt)("em",{parentName:"p"},"Comma-Separated Values")," (Valores Separados por V\xedrgula) e arquivos CSV s\xe3o geralmente a forma\npela qual os dados de ",(0,n.kt)("em",{parentName:"p"},"software")," de planilhas (como o Microsoft Excel ou o Google Sheets) s\xe3o exportados para um formato port\xe1til."),(0,n.kt)("p",null,"Veremos que n\xe3o necessariamente s\xe3o separados por v\xedrgulas, mas podem ser separados por qualquer delimitador capaz de indicar o fim e o come\xe7o de\num item (por conven\xe7\xe3o, usaremos a v\xedrgula ou o ponto e v\xedrgula)."),(0,n.kt)("p",null,"Veja um exemplo de uma planilha:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Planilha de Usu\xe1rios",src:o(6829).Z,width:"556",height:"329"})),(0,n.kt)("p",null,"Agora, observe como essa planilha ficaria no formato ",(0,n.kt)("inlineCode",{parentName:"p"},".csv"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"Name,Username,Email\nRoger Smith,rsmith,wigginsryan@yahoo.com\nMichelle Beck,mlbeck,hcosta@hotmail.com\nAshley Barker,a_bark_x,a_bark_x@turner.com\nLynn Gonzales,goodmanjames,lynniegonz@hotmail.com\nJennifer Chase,chasej,jchase@ramirez.com\nCharles Hoover,choover,choover89@yahoo.com\nAdrian Evans,adevans,adevans98@yahoo.com\nSusan Walter,susan82,swilliams@yahoo.com\nStephanie King,stephanieking,sking@morris-tyler.com\nErika Miller,jessica32,ejmiller79@yahoo.com\n")),(0,n.kt)("p",null,"Note que a primeira linha do arquivo n\xe3o representa nenhum valor; serve somente para indicar o t\xedtulo de cada coluna."),(0,n.kt)("h3",{id:"dictreader"},(0,n.kt)("inlineCode",{parentName:"h3"},"DictReader")),(0,n.kt)("p",null,"Para ler arquivos CSV, podemos usar o objeto ",(0,n.kt)("inlineCode",{parentName:"p"},"DictReader"),". Veja um exemplo:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"#-Vamos usar o arquivo acima como exemplo. Chame-o de 'users.csv';\nimport csv\n \nlist_of_names = []\n#-Fa\xe7a desse modo quando abrir um arquivo CSV para leitura\nwith open('users.csv', newline='') as users_csv:\n  user_reader = csv.DictReader(users_csv)\n  for row in user_reader:\n    list_of_names.append(row['Name'])\n")),(0,n.kt)("p",null,"O c\xf3digo acima est\xe1 essencialmente tranformando cada linha num dicion\xe1rio, onde a chave de cada coluna \xe9 o t\xedtulo da pr\xf3pria coluna,\ne podemos iterar por todas as linhas (",(0,n.kt)("em",{parentName:"p"},"rows"),") para ler e fazer opera\xe7\xf5es."),(0,n.kt)("admonition",{title:"Lendo CSV ",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Podemos ler diferentes tipos de arquivos CSV, isto \xe9, com diferentes delimitadores. No exemplo acima, o delimitador foi ",(0,n.kt)("inlineCode",{parentName:"p"},","),", por\xe9m existem outros como\n",(0,n.kt)("inlineCode",{parentName:"p"},";"),". Para ler qualquer arquivo, independente do delimitador, adicione o par\xe2metro ",(0,n.kt)("inlineCode",{parentName:"p"},"delimiter"),", como no exemplo:"),(0,n.kt)("pre",{parentName:"admonition"},(0,n.kt)("code",{parentName:"pre",className:"language-python"},"import csv\n \nlist_of_names = []\nwith open('users.csv', newline='') as users_csv:\n  user_reader = csv.DictReader(users_csv, delimiter=',')\n  for row in user_reader:\n    list_of_names.append(row['Name'])\n")),(0,n.kt)("p",{parentName:"admonition"},"Seguindo o exemplo acima, s\xf3 substitua o delimitador pelo que estiver presente no seu arquivo.")))}u.isMDXComponent=!0},6829:(e,a,o)=>{o.d(a,{Z:()=>t});const t=o.p+"assets/images/sheet-47e26a4b1ed2d0dd7aab2f3994530f9c.png"}}]);